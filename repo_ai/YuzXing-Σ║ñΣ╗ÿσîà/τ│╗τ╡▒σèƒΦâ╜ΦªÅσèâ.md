# YuzXing 個人戰情室系統 - 完整功能規劃

## 一、系統架構

### 四大領域模組
1. **筆記模組** - 一般筆記管理
2. **投資模組** - ETF 追蹤 + 記帳功能
3. **學習模組** - 學習紀錄管理
4. **法律模組** - 法律資料管理

### 資料儲存
- **本地端**：IndexedDB（離線使用）
- **雲端**：Google Sheets（四份試算表）
- **圖片**：S3 儲存（Manus 內建）

---

## 二、筆記模組功能清單

### 基本功能
- [x] 新增筆記
- [x] 編輯筆記
- [x] 刪除筆記（移到垃圾桶）
- [x] 永久刪除
- [x] 還原筆記
- [x] 搜尋筆記
- [x] 釘選筆記
- [x] 封存筆記

### 進階功能
- [ ] **圖片上傳**（拍照/選擇相簿）
- [ ] **圖片預覽**（點擊放大）
- [ ] **圖片刪除**
- [ ] **多圖片支援**（一則筆記可包含多張圖片）
- [ ] **Markdown 支援**（粗體、斜體、清單）
- [ ] **語音輸入**（轉文字）
- [ ] **分享筆記**（匯出為文字/圖片）

### 組織功能
- [x] 資料夾分類
- [x] 標籤系統
- [x] 顏色標記
- [ ] **批次操作**（多選、批次刪除、批次移動）
- [ ] **排序方式**（時間、標題、修改時間）
- [ ] **篩選功能**（依資料夾、標籤、日期）

### 同步功能
- [ ] **Google Sheets 雙向同步**
- [ ] **離線編輯**（自動同步）
- [ ] **衝突處理**（本地優先/雲端優先）
- [ ] **同步狀態顯示**

---

## 三、投資模組功能清單

### ETF 追蹤
- [ ] **新增 ETF**（輸入代號、投入金額、持股數量）
- [ ] **編輯 ETF 資料**
- [ ] **刪除 ETF**
- [ ] **即時報價更新**（Yahoo Finance API）
- [ ] **自動計算損益**
- [ ] **殖利率顯示**
- [ ] **配息紀錄**
- [ ] **建議動作**（買入/持有/賣出）
- [ ] **圖表顯示**（損益趨勢、資產配置）

### 記帳功能
- [ ] **新增收支記錄**（日期、類型、類別、金額、備註）
- [ ] **編輯記錄**
- [ ] **刪除記錄**
- [ ] **自訂類別**（可新增/修改/刪除類別）
- [ ] **自訂欄位**（彈性新增欄位）
- [ ] **月份統計**（收入/支出/結餘）
- [ ] **圖表分析**（圓餅圖、長條圖）
- [ ] **匯出報表**（Excel/PDF）

### 同步功能
- [ ] **Google Sheets 同步**（ETF 投資追蹤工作表）
- [ ] **Google Sheets 同步**（每日記帳工作表）
- [ ] **自動更新價格**（每日定時）

---

## 四、學習模組功能清單

### 基本功能
- [ ] **新增學習紀錄**（標題、內容、來源、連結）
- [ ] **編輯學習紀錄**
- [ ] **刪除學習紀錄**
- [ ] **進度追蹤**（0-100%）
- [ ] **狀態管理**（進行中/已完成/暫停）
- [ ] **分類管理**（程式設計、語言、投資等）
- [ ] **標籤系統**

### 進階功能
- [ ] **學習計畫**（設定目標、期限）
- [ ] **學習統計**（總時數、完成率）
- [ ] **筆記關聯**（連結到筆記模組）
- [ ] **資源管理**（附件、連結）
- [ ] **提醒功能**（學習提醒）

### 同步功能
- [ ] **Google Sheets 同步**（學習紀錄工作表）

---

## 五、法律模組功能清單

### 基本功能
- [ ] **新增法律資料**（標題、內容、類型、狀態）
- [ ] **編輯法律資料**
- [ ] **刪除法律資料**
- [ ] **類型分類**（契約/法規/判例/諮詢）
- [ ] **狀態管理**（待處理/進行中/已完成）
- [ ] **重要性標記**（高/中/低）
- [ ] **到期日提醒**

### 進階功能
- [ ] **文件上傳**（PDF、圖片）
- [ ] **文件預覽**
- [ ] **相關文件連結**
- [ ] **時間軸顯示**（重要日期）
- [ ] **提醒通知**（到期前提醒）

### 同步功能
- [ ] **Google Sheets 同步**（法律資料庫工作表）

---

## 六、共用功能

### 使用者介面
- [x] 深色/淺色模式切換
- [x] 側邊欄導航
- [ ] **快速搜尋**（全域搜尋）
- [ ] **最近使用**（快速存取）
- [ ] **我的最愛**（常用功能）

### 設定功能
- [x] 自訂介面文字
- [ ] **自訂主題顏色**
- [ ] **字體大小調整**
- [ ] **同步設定**（自動/手動）
- [ ] **備份/還原**

### 控制台功能
- [ ] **系統狀態監控**
- [ ] **API 連線狀態**
- [ ] **同步記錄**
- [ ] **錯誤日誌**
- [ ] **手動觸發同步**
- [ ] **資料統計**（總筆記數、總投資額等）

---

## 七、Google Sheets 試算表結構

### 1. 筆記試算表
- 工作表：`筆記資料庫`
- 欄位：ID、建立時間、更新時間、標題、內容、分類、標籤、是否釘選、是否封存、圖片URL

### 2. 投資試算表
- 工作表 1：`ETF投資追蹤`
- 欄位：ETF代號、中文名稱、投入金額、收盤價、持股數量、當前市值、未實現損益、報酬率、殖利率、年預估配息、配息頻率、建議動作
- 工作表 2：`每日記帳`
- 欄位：日期、類型、類別、金額、備註

### 3. 學習試算表
- 工作表：`學習紀錄`
- 欄位：ID、建立時間、更新時間、標題、內容、來源、連結、進度、狀態、分類、標籤

### 4. 法律試算表
- 工作表：`法律資料庫`
- 欄位：ID、建立時間、更新時間、標題、內容、類型、狀態、重要性、到期日、相關文件、標籤

---

## 八、技術實作重點

### 圖片上傳流程
1. 使用者選擇圖片（相機/相簿）
2. 壓縮圖片（減少儲存空間）
3. 上傳到 S3（使用 Manus 內建 storagePut）
4. 取得圖片 URL
5. 儲存 URL 到 IndexedDB 和 Google Sheets

### Google Sheets API 整合
1. 使用 Google Apps Script 建立 Web App
2. 提供 RESTful API 端點（GET/POST/PUT/DELETE）
3. 前端透過 tRPC 呼叫後端
4. 後端呼叫 Google Sheets API
5. 處理回應並更新本地資料

### 離線支援
1. 所有資料優先儲存到 IndexedDB
2. 背景同步到 Google Sheets
3. 離線時僅操作本地資料
4. 上線後自動同步

---

## 九、開發優先順序

### Phase 1: 核心功能（本週）
1. 筆記新增/編輯/刪除
2. 圖片上傳功能
3. 投資 ETF 新增/編輯
4. 記帳新增/編輯

### Phase 2: 進階功能（下週）
1. Google Sheets 整合
2. 學習/法律模組完整功能
3. 搜尋/篩選/排序

### Phase 3: 優化功能（第三週）
1. 圖表顯示
2. 批次操作
3. 提醒通知
4. 匯出功能

---

## 十、測試計畫

### 功能測試
- [ ] 每個模組的新增/編輯/刪除功能
- [ ] 圖片上傳/預覽/刪除
- [ ] Google Sheets 同步（雙向）
- [ ] 離線使用
- [ ] 搜尋/篩選功能

### 效能測試
- [ ] 大量資料載入速度
- [ ] 圖片上傳速度
- [ ] 同步效能

### 相容性測試
- [ ] iOS Safari
- [ ] Android Chrome
- [ ] 桌面瀏覽器

---

## 十一、交付清單

### 程式碼
- [ ] 完整原始碼（GitHub repository）
- [ ] 部署版本（Manus 平台）
- [ ] 開發文件

### 試算表
- [ ] 筆記試算表範本
- [ ] 投資試算表範本
- [ ] 學習試算表範本
- [ ] 法律試算表範本

### 文件
- [ ] 使用手冊
- [ ] API 文件
- [ ] Google Apps Script 程式碼
- [ ] 部署指南
