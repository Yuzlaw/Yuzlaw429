# Google Sheets 資料庫系統 - 試算表結構設計

## 📊 試算表清單

### 1. 筆記試算表 (Notes)
**工作表名稱**：`筆記資料庫`

| 欄位名稱 | 說明 | 範例 |
|---------|------|------|
| ID | 自動編號 | 1, 2, 3... |
| 建立時間 | 自動記錄 | 2025-01-15 10:30:00 |
| 更新時間 | 自動記錄 | 2025-01-15 14:20:00 |
| 內容 | 筆記完整內容（第一行為標題） | "會議記錄\n今天討論了..." |
| 標題 | 自動擷取第一行 | "會議記錄" |
| 分類 | 筆記分類 | "工作", "個人", "學習" |
| 標籤 | 多個標籤（逗號分隔） | "重要,待辦,專案A" |
| 是否釘選 | TRUE/FALSE | TRUE |
| 是否封存 | TRUE/FALSE | FALSE |

---

### 2. 學習試算表 (Learning)
**工作表名稱**：`學習紀錄`

| 欄位名稱 | 說明 | 範例 |
|---------|------|------|
| ID | 自動編號 | 1, 2, 3... |
| 建立時間 | 自動記錄 | 2025-01-15 10:30:00 |
| 更新時間 | 自動記錄 | 2025-01-15 14:20:00 |
| 標題 | 學習主題 | "Python 進階教學" |
| 內容 | 學習筆記 | "今天學習了..." |
| 來源 | 學習來源 | "Udemy", "YouTube", "書籍" |
| 連結 | 相關連結 | "https://..." |
| 進度 | 學習進度 (%) | 75 |
| 狀態 | 學習狀態 | "進行中", "已完成", "暫停" |
| 分類 | 學習分類 | "程式設計", "語言", "投資" |
| 標籤 | 多個標籤 | "Python,進階,實作" |

---

### 3. 法律試算表 (Legal)
**工作表名稱**：`法律資料庫`

| 欄位名稱 | 說明 | 範例 |
|---------|------|------|
| ID | 自動編號 | 1, 2, 3... |
| 建立時間 | 自動記錄 | 2025-01-15 10:30:00 |
| 更新時間 | 自動記錄 | 2025-01-15 14:20:00 |
| 標題 | 法律事項標題 | "租賃契約" |
| 內容 | 詳細內容 | "契約內容..." |
| 類型 | 法律類型 | "契約", "法規", "判例", "諮詢" |
| 狀態 | 處理狀態 | "待處理", "進行中", "已完成" |
| 重要性 | 重要程度 | "高", "中", "低" |
| 到期日 | 重要日期 | 2025-12-31 |
| 相關文件 | 文件連結 | "https://..." |
| 標籤 | 多個標籤 | "租屋,契約,重要" |

---

### 4. 虛擬貨幣追蹤試算表 (Crypto)
**工作表名稱**：`虛擬貨幣投資追蹤`

| 欄位名稱 | 說明 | 範例 | 公式/自動更新 |
|---------|------|------|--------------|
| 幣別代號 | 代號 | BTC, ETH, BNB | 手動輸入 |
| 中文名稱 | 名稱 | 比特幣, 以太坊 | 手動輸入 |
| 投入金額 | 總投入 (TWD) | 100000 | 手動輸入 |
| 當前價格 (USD) | 即時價格 | 45000 | **自動更新** (CoinGecko API) |
| 當前價格 (TWD) | 台幣價格 | 1395000 | 自動計算 (USD * 匯率) |
| 持有數量 | 持幣數量 | 0.5 | 手動輸入 |
| 當前市值 (TWD) | 市值 | 697500 | 自動計算 |
| 未實現損益 | 損益 | +597500 | 自動計算 |
| 報酬率 (%) | 報酬率 | +597.5% | 自動計算 |
| 24小時漲跌 (%) | 漲跌幅 | +5.2% | **自動更新** |
| 最後更新時間 | 更新時間 | 2025-01-15 14:30 | **自動更新** |
| 建議動作 | 操作建議 | 持有, 加碼, 減碼 | 根據規則自動判斷 |
| 備註 | 備註 | "長期持有" | 手動輸入 |

---

### 5. 維護控制台試算表 (Maintenance)
**工作表名稱**：`系統維護控制台`

#### 5.1 系統狀態監控
| 項目 | 狀態 | 最後更新時間 | 說明 |
|-----|------|------------|------|
| ETF 價格更新 | 正常 | 2025-01-15 14:00 | 每日自動更新 |
| 虛擬貨幣價格更新 | 正常 | 2025-01-15 14:30 | 每小時更新 |
| API 連線狀態 | 正常 | 2025-01-15 14:30 | - |
| 資料備份狀態 | 正常 | 2025-01-15 00:00 | 每日備份 |

#### 5.2 API 呼叫記錄
| 時間 | API 名稱 | 狀態 | 錯誤訊息 |
|-----|---------|------|---------|
| 2025-01-15 14:30 | CoinGecko | 成功 | - |
| 2025-01-15 14:00 | Yahoo Finance | 成功 | - |

#### 5.3 錯誤日誌
| 時間 | 錯誤類型 | 錯誤訊息 | 已修復 |
|-----|---------|---------|--------|
| - | - | - | - |

#### 5.4 維護工具按鈕
| 功能 | 說明 | 按鈕 |
|-----|------|------|
| 手動更新 ETF 價格 | 立即更新所有 ETF 價格 | [執行] |
| 手動更新虛擬貨幣價格 | 立即更新所有虛擬貨幣價格 | [執行] |
| 清除錯誤日誌 | 清除所有錯誤記錄 | [執行] |
| 資料備份 | 備份所有試算表資料 | [執行] |
| 重置系統 | 重置所有設定（危險操作） | [執行] |

---

### 6. 分類標籤設定試算表 (Settings)
**工作表名稱**：`分類標籤設定`

#### 6.1 筆記分類
| 分類名稱 | 顏色代碼 | 圖示 |
|---------|---------|------|
| 工作 | #FF6B6B | 💼 |
| 個人 | #4ECDC4 | 👤 |
| 學習 | #45B7D1 | 📚 |
| 專案 | #FFA07A | 📁 |

#### 6.2 常用標籤
| 標籤名稱 | 顏色代碼 |
|---------|---------|
| 重要 | #FF0000 |
| 待辦 | #FFA500 |
| 已完成 | #00FF00 |
| 緊急 | #FF1493 |

#### 6.3 學習分類
| 分類名稱 |
|---------|
| 程式設計 |
| 語言學習 |
| 投資理財 |
| 專業技能 |

#### 6.4 法律類型
| 類型名稱 |
|---------|
| 契約 |
| 法規 |
| 判例 |
| 諮詢記錄 |

---

## 🔧 Google Apps Script 功能需求

### 1. API 端點
- `GET /notes` - 取得所有筆記
- `POST /notes` - 新增筆記
- `PUT /notes/:id` - 更新筆記
- `DELETE /notes/:id` - 刪除筆記
- `GET /learning` - 取得學習紀錄
- `GET /legal` - 取得法律資料
- `GET /crypto` - 取得虛擬貨幣資料
- `POST /crypto/update` - 手動更新虛擬貨幣價格
- `GET /settings` - 取得分類標籤設定

### 2. 自動更新功能
- 每小時更新虛擬貨幣價格
- 每日更新 ETF 價格
- 每日備份資料

### 3. 維護功能
- 記錄 API 呼叫
- 記錄錯誤日誌
- 提供手動觸發更新

---

## 📱 PWA 控制台功能需求

### 1. 系統狀態監控
- 顯示各項服務狀態
- 顯示最後更新時間
- 顯示 API 連線狀態

### 2. 手動操作
- 手動同步資料
- 手動更新價格
- 清除本地快取

### 3. 錯誤處理
- 顯示錯誤日誌
- 提供錯誤修復建議

### 4. 資料管理
- 匯出所有資料
- 匯入資料
- 資料備份/還原
