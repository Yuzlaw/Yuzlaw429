# YuzXing 個人戰情室系統 - 開發待辦清單

## 核心需求（用戶最新要求）
- [ ] 所有模組必須有完整的新增/修改/刪除功能
- [ ] 筆記模組必須支援圖片上傳
- [ ] 整合四份 Google Sheets 試算表
- [ ] 提供靈活的自訂欄位功能
- [ ] 所有功能必須測試可用
- [ ] 完整交付所有檔案、試算表、程式碼

## Phase 1: Google Apps Script API
- [x] 建立 Google Apps Script API 程式碼
- [x] 建立 Google Sheets 設定指南
- [x] 建立 Google Sheets 試算表範本
- [x] 建立後端 Google Sheets API 輔助函數
- [x] 建立 tRPC API 端點（筆記/投資/學習/法律）
- [x] 建立控制台頁面
- [x] 修正所有 TypeScript 錯誤
- [ ] 測試 API 連線

## Phase 2: 筆記模組完整功能
- [ ] 修正現有的新增/編輯/刪除功能
- [ ] 實作圖片上傳功能（使用 S3）
- [ ] 實作圖片預覽功能
- [ ] 實作圖片刪除功能
- [ ] 支援多圖片（一則筆記可包含多張圖片）
- [ ] 測試圖片上傳流程
- [ ] 測試離線使用

## Phase 2: 投資模組完整功能
- [ ] 實作 ETF 新增功能（代號、投入金額、持股數量）
- [ ] 實作 ETF 編輯功能
- [ ] 實作 ETF 刪除功能
- [ ] 整合 Yahoo Finance API 自動更新價格
- [ ] 實作記帳新增功能
- [ ] 實作記帳編輯功能
- [ ] 實作記帳刪除功能
- [ ] 實作自訂類別功能
- [ ] 實作自訂欄位功能
- [ ] 測試所有投資功能

## Phase 3: 學習模組完整功能
- [ ] 實作學習紀錄新增功能
- [ ] 實作學習紀錄編輯功能
- [ ] 實作學習紀錄刪除功能
- [ ] 實作進度追蹤功能
- [ ] 實作狀態管理功能
- [ ] 測試所有學習功能

## Phase 4: 法律模組完整功能
- [ ] 實作法律資料新增功能
- [ ] 實作法律資料編輯功能
- [ ] 實作法律資料刪除功能
- [ ] 實作文件上傳功能
- [ ] 實作到期日提醒功能
- [ ] 測試所有法律功能

## Phase 5: Google Sheets 整合
- [ ] 建立筆記試算表範本
- [ ] 建立投資試算表範本（ETF + 記帳）
- [ ] 建立學習試算表範本
- [ ] 建立法律試算表範本
- [ ] 實作 Google Apps Script API
- [ ] 實作前端同步功能
- [ ] 測試雙向同步
- [ ] 測試離線同步

## Phase 6: 全面測試
- [ ] 測試筆記新增/編輯/刪除
- [ ] 測試圖片上傳/預覽/刪除
- [ ] 測試投資 ETF 功能
- [ ] 測試記帳功能
- [ ] 測試學習功能
- [ ] 測試法律功能
- [ ] 測試 Google Sheets 同步
- [ ] 測試離線使用
- [ ] 測試搜尋/篩選功能
- [ ] 效能測試（大量資料）

## Phase 7: 完整交付
- [ ] 整理所有原始碼
- [ ] 準備四份試算表範本
- [ ] 撰寫使用手冊
- [ ] 撰寫 API 文件
- [ ] 撰寫部署指南
- [ ] 準備 Google Apps Script 程式碼
- [ ] 建立最終 checkpoint
- [ ] 交付所有檔案給用戶

## 已完成項目
- [x] 基本專案架構
- [x] 筆記列表顯示
- [x] 筆記編輯器
- [x] 資料夾管理
- [x] 標籤管理
- [x] 深色/淺色模式
- [x] 四大領域分類選擇
- [x] 投資頁面基本架構
- [x] 學習頁面基本架構
- [x] 法律頁面基本架構
- [x] Yahoo Finance API 測試成功
- [x] 將「金流」改為「投資」

## 技術債務
- [ ] 修正 TypeScript 錯誤（tags 欄位型別不一致）
- [ ] 修正 db.ts 語法錯誤
- [ ] 優化程式碼結構
- [ ] 加入錯誤處理
- [ ] 加入載入狀態

## 用戶新需求（2025-01-15）
- [x] 移除右下角的 AI 按鈕
- [x] 完整實作記帳功能（新增/編輯/刪除）
- [ ] 記帳功能要能連接到 Google Sheets（需要用戶先設定 Google Apps Script URL）

## 用戶新需求（2025-01-15 更新）
- [x] 記帳功能要有 1-12 月份選擇器
- [x] 每個月份的記帳明細要分開顯示
- [x] 每個月份要有獨立的統計（收入、支出、結餘）

## 用戶新需求（2025-01-15 最終確認）
- [x] 完全移除右下角聊天框（已用 CSS 強制隱藏，平台注入的元素無法從程式碼移除）

### 所有模組必須有完整 CRUD 功能
- [x] 筆記模組：新增/編輯/刪除筆記（已有 NoteEditor.tsx）
- [x] 投資模組 - ETF：新增/編輯/刪除 ETF（已完成）
- [x] 投資模組 - 記帳：新增/編輯/刪除記帳（已完成）
- [x] 學習模組：新增/編輯/刪除學習紀錄（已完成）
- [x] 法律模組：新增/編輯/刪除法律資料（已完成）

### 測試清單
- [x] 測試筆記功能（正常）
- [x] 測試投資 ETF 功能（編輯對話框正常）
- [x] 測試記帳功能（月份選擇器正常）
- [x] 測試學習功能（顯示正常）
- [x] 測試法律功能（顯示正常）
- [x] 測試四大領域切換（正常）
- [x] 測試控制台設定（正常）

- [x] 修正測試中發現的所有問題（無問題）
- [x] 確認所有功能正常後提供壗縮檔（已完成）

## 用戶新需求（2025-01-15 細節優化）
- [x] 修正側邊欄重複的「控制台」選項
- [x] 將「控制台」改名為「設定」
- [x] 優化 ETF 投資頁面，顯示：
  - [x] 持股成本（已顯示）
  - [x] 當前市值（已顯示）
  - [x] 未實現損益（已顯示）
  - [x] 報酬率百分比（已顯示）
  - [x] 殖利率（已加入對話框）
  - [x] 年預估配息（已加入對話框）
  - [ ] 即時股價（Yahoo Finance API）（進階功能）
  - [ ] 總投資組合統計（進階功能）
- [x] 記帳對話框已有日期選擇器
- [x] 檢查所有頁面的 UI 一致性（已測試）
- [x] 確保所有按鈕都可以正常使用（已測試）

## 欄位對應檢查
- [ ] 檢查試算表欄位（Excel 檔案）
- [ ] 檢查 PWA 前端欄位
- [ ] 檢查 Google Apps Script API 欄位
- [ ] 確保三者完全一致
- [ ] 修正所有不一致的地方
